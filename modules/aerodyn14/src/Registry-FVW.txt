##################################################################################################################################
# Registry for FVW
# Entries are of the form
# keyword <modulename/modname> <TypeBeingDefined> <FieldType> <FieldName> <Dims> <InitialValue> <Ctrl> "<DESCRIP>" "<UNITS>"
##################################################################################################################################
include Registry_NWTC_Library.txt
usefrom InflowWind.txt
usefrom Registry-AD14AeroConf.txt





#FVW_WindTypes
typedef  FVW/FVW           FVW_WindType         InflowWind_InputType             InputData               -  -  "InflowWind Input"            -
typedef  ^                 FVW_WindType         InflowWind_ParameterType         ParamData               -  -  "InflowWind Parameters"       -
typedef  ^                 FVW_WindType         InflowWind_ContinuousStateType   ContData                -  -  "InflowWind ContinousStates"  -
typedef  ^                 FVW_WindType         InflowWind_DiscreteStateType     DiscData                -  -  "InflowWind DiscreteStatess"  -
typedef  ^                 FVW_WindType         InflowWind_ConstraintStateType   ConstrData              -  -  "InflowWind ConstraintStates" -
typedef  ^                 FVW_WindType         InflowWind_OtherStateType        OtherData               -  -  "InflowWind OtherStates"      -
typedef  ^                 FVW_WindType         InflowWind_OutputType            OutputData              -  -  "InflowWind Output"           -
typedef  ^                 FVW_WindType         InflowWind_InitInputType         InitInputData           -  -  "InflowWind InitInput"        -
typedef  ^                 FVW_WindType         InflowWind_InitOutputType        InitOutputData          -  -  "InflowWind InitOutput"       -
typedef  ^                 FVW_WindType         InflowWind_MiscVarType           MiscData                -  -  "InflowWind MiscVars"         -




#####################  Registry for FVW ###############
#### ..... PARAMETERS .........................
#### FVW_Parameters
#typedef  FVW/FVW           ParameterType        InflowWind_ParameterType        IfW                     -  -  "InflowWind Parameters"       -
#typedef  ^                 ^                    FVW_WindType                    FVW_Wind                -  -  "Wind Data"                   -
                                                                                                         
#FVW_ParameterType                                                                                       
typedef  ^                  FVW_ParameterType    Logical                         FVWInit                 -  .TRUE.   -  -
typedef  ^                  FVW_ParameterType    ReKi                            DtAero                  -  -        -  -
typedef  ^                  FVW_ParameterType    IntKi                           NELM                    -  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            RELM                    :  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            RNodes                  :  -        -  -
typedef  ^                  FVW_ParameterType    IntKi                           NumBl                   -  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            Radius                  -  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            C                       :  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            HH                      -  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            HubRad                  -  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            Time                    -  -        -  -
typedef  ^                  FVW_ParameterType    AD14AeroConf_ParameterType      AirfoilParm             -  -        -  -
typedef  ^                  FVW_ParameterType    AD14AeroConf_MiscVarType        AirfoilOut              -  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            CDD                     :  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            CLL                     :  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            CMM                     :  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            TMax                    -  -        -  -
typedef  ^                  FVW_ParameterType    ReKi                            RotSpeed                -  -        -  -
typedef  ^                  FVW_ParameterType    MeshType                        FVWInputMarkers         :  -        -  -
typedef  ^                  FVW_ParameterType    AD14AeroConf_InputType          FVWTurbineComponents    -  -        -  -
typedef  ^                  FVW_ParameterType    FVW_WindType                    FVW_Wind                -  -        -  -







# ....... OtherStateType ............
# FVW_OtherStateType
typedef  FVW/FVW           OtherStateType       InflowWind_OtherStateType        IfW               -  -  "InflowWind OtherStates"      -

# ....... MiscVars ............
# FVW_MiscVarType
typedef  FVW/FVW           MiscVarType          InflowWind_MiscVarType           IfW               -  -  "InflowWind MiscVars"         -

# ........ Input ............
# FVW_InputType
typedef  FVW/FVW           InputType            InflowWind_InputType             IfW               -  -  "InflowWind Input"            -

# ........ Output ............
# FVW_OutputType

typedef  FVW/FVW           OutputType           InflowWind_OutputType            IfW               -  -  "InflowWind Output"           -

#.......... ContinuousStateType ......
# FVW_ContinuousStateType
typedef FVW/FVW            ContinuousStateType  InflowWind_ContinuousStateType   IfW               -  -  "InflowWind ContinousStates"  -

#.......... DiscreteStateType ......
# FVW_DiscreteStateType
typedef FVW/FVW            DiscreteStateType    InflowWind_DiscreteStateType     IfW               -  -  "InflowWind DiscreteStatess"  -

#.......... ConstraintStateType ......
# FVW_ConstraintStateType
typedef FVW/FVW            ConstraintStateType  InflowWind_ConstraintStateType   IfW               -  -  "InflowWind ConstraintStates" -


#.......... InitInputType ......
# FVW_InitInputType
typedef FVW/FVW            InitInputType        InflowWind_InitInputType         IfW               -  -  "InflowWind InitInput"        -

#.......... InitOutputType ......
# FVW_InitOutputType
typedef FVW/FVW            InitOutputType       InflowWind_InitOutputType        IfW               -  -  "InflowWind InitOutput"       -






#### CalVelScale_data
###typedef  FVW/FVW              CVSD         IntKi    counter                      - 0 -  "" -
###typedef  ^                    ^            Reki     Denominator                  - 0.0 -  "" -
###typedef  ^                    ^            ^        Numerator                    - 0.0 -  "" -
###
#### turbine_average_velocity_data
###typedef  FVW/FVW  turbine_average_velocity_data     Reki     average_velocity_array_temp  : - -  "the average velocity of the whole blade sections in a specific time step" -
###typedef  ^                    ^                     ^        average_velocity_array       : - -  "" -
###typedef  ^                    ^                     ^        swept_area                   : - -  "" m2
###typedef  ^                    ^                     IntKi    time_step_velocity           - -1 - "" -
###typedef  ^                    ^                     ^        time_step_velocity_array     : - -  "" -
###typedef  ^                    ^                     ^        time_step_pass_velocity      - -1 - "" -
###typedef  ^                    ^                     ^        time_step_force              - -1 - "" -
###
#### FVW_Wake_Deficit_Data
###typedef  ^         FVW_Wake_Deficit_Data   IntKi    np_x                         - - -  "point per axial distance" -
###typedef  ^                    ^            Reki     X_length                     - - -  "normalized length in axial direction" -
###typedef  ^                    ^            Reki     Turb_Stress_FVW             :: - -  "" -
###typedef  ^                    ^            IntKi    n_x_vector                   - - -  "" -
###typedef  ^                    ^            IntKi    n_r_vector                   - - -  "" -
###typedef  ^                    ^            Reki     ppR                          - - -  "Point_per_R_resoulution" -
###
#### meandering_data
###typedef  FVW/FVW              MeanderData  IntKi     scale_factor                 - - -  "" -
####typedef  ^                    ^            ^        release_time                 - - -  "" -
####typedef  ^                    ^            ^        flying_time                  - - -  "" -
####typedef  ^                    ^            ^        simulation_time_length       - - -  "" -
###typedef  ^                    ^            ^         moving_time                  - - -  "" -
####typedef  ^                    ^           Reki      FVW_time_step                - - -  "" -
####typedef  ^                    ^            ^        temp_center_wake             3 - -  "" -
####typedef  ^                    ^            ^        temp_velocity                3 - -  "" -
####typedef  ^                    ^            ^        U_Scale_Factor               - - -  "" -
####typedef  ^                    ^            ^        U_factor                     - - -  "" -
###
###
#### RTPD
###typedef  FVW/FVW   read_turbine_position_data  IntKi          SimulationOrder_index        - - -  "" -
###typedef  ^                    ^                ^              Turbine_sort_order           : - -  "" -
###typedef  ^                    ^                ^              WT_index                     - - -  "wind turbine index in the wind farm" -
###typedef  ^                    ^                ^              TurbineInfluenceData        :: - -  "" -
###typedef  ^                    ^                ^              upwind_turbine_index         : - -  "the upwind turbines that affecting this turbine" -
###typedef  ^                    ^                ^              downwind_turbine_index       : - -  "" -
###typedef  ^                    ^                ^              upwindturbine_number         - - -  "the number of upwind turbines affecting the downwind turbine" -
###typedef  ^                    ^                ^              downwindturbine_number       - - -  "" -
###typedef  ^                    ^                Reki           turbine_windorigin_length    : - -  "" -
###typedef  ^                    ^                ^              upwind_turbine_projected_distance    : - -  "the projected distance between two turbines" -
###typedef  ^                    ^                ^              downwind_turbine_projected_distance  : - -  "" -
###typedef  ^                    ^                ^              turbine_angle               :: - -  "" -
###typedef  ^                    ^                ^              upwind_align_angle           : - -  "the angle beween the line connecting the upwind turbine and this turbine and the wind direction vector" -
###typedef  ^                    ^                ^              downwind_align_angle         : - -  "" -
###typedef  ^                    ^                ^              upwind_turbine_Xcoor         : - -  "the coordinate of the upwind turbine which affects this investigated turbine" -
###typedef  ^                    ^                ^              upwind_turbine_Ycoor         : - -  "" -
###typedef  ^                    ^                ^              wind_farm_Xcoor              : - -  "the coordinates of all the turbines in the wind farm" -
###typedef  ^                    ^                ^              wind_farm_Ycoor              : - -  "" -
###typedef  ^                    ^                ^              downwind_turbine_Xcoor       : - -  "the coordinate of the downwind turbine which is affected by this investigated turbine" -
###typedef  ^                    ^                ^              downwind_turbine_Ycoor       : - -  "" -
###
###
#### weighting_method
###typedef  FVW/FVW              WeiMethod    Reki     sweptarea                    : - -  "" -
###typedef  ^                    ^            ^        weighting_denominator        - - -  "" -
###
#### TI_downstream_data
###typedef  FVW/FVW              TIDownstream Reki     TI_downstream_matrix        :: - -  "" -
###typedef  ^                    ^            IntKi    i                            - - -  "" -
###typedef  ^                    ^            ^        j                            - - -  "" -
###typedef  ^                    ^            ^        k                            - - -  "" -
###typedef  ^                    ^            ^        cross_plane_position_ds      - - -  "the cross plane position which to be investigated in term of the flying time" -
###typedef  ^                    ^            ^        cross_plane_position_TI      - - -  "the cross plane position which to be investigated in term of the n_x_vector" -
###typedef  ^                    ^            ^        distance_index               - - -  "the index of the distance in the TI axisymmetric array" -
###typedef  ^                    ^            ^        counter1                     - - -  "" -
###typedef  ^                    ^            ^        counter2                     - - -  "" -
###typedef  ^                    ^            ^        initial_timestep             - - -  "" -
###typedef  ^                    ^            Reki     y_axis_turbine               - - -  "" -
###typedef  ^                    ^            ^        z_axis_turbine               - - -  "" -
###typedef  ^                    ^            ^        distance                     - - -  "the distance between one point to the meandered wake center" -
###typedef  ^                    ^            ^        TI_downstream_node           - - -  "the TI at a specfic point in the inbestigated cross plane" -
###typedef  ^                    ^            ^        TI_node_temp                 - - -  "" -
###typedef  ^                    ^            ^        TI_node                      - - -  "" -
###typedef  ^                    ^            ^        TI_accumulation              - - -  "" -
###typedef  ^                    ^            ^        TI_apprant_accumulation      - - -  "" -
###typedef  ^                    ^            ^        TI_average                   - - -  "THE AVERAGE TI OF THE CROSS PLANE" -
###typedef  ^                    ^            ^        TI_apprant                   - - -  "The TI due to the meadering" -
###typedef  ^                    ^            ^        HubHt                        - - -  "" -
###typedef  ^                    ^            ^        wake_center_y                - - -  "" -
###typedef  ^                    ^            ^        wake_center_z                - - -  "" -
###typedef  ^                    ^            ^        Rscale                       - - -  "" -
###typedef  ^                    ^            ^        y                            - - -  "" -
###typedef  ^                    ^            ^        z                            - - -  "" -
###typedef  ^                    ^            ^        zero_spacing                 - - -  "" -
###typedef  ^                    ^            ^        temp1                        - - -  "" -
###typedef  ^                    ^            ^        temp2                        - - -  "" -
###typedef  ^                    ^            ^        temp3                        - - -  "" -
###
#### Turbulence_KS
###typedef  FVW/FVW              TurbKaimal   IntKi    fs                           - - -  "sample frequency" -
###typedef  ^                    ^            ^        temp_n                       - - -  "" -
###typedef  ^                    ^            ^        i                            - - -  "" -
###typedef  ^                    ^            Reki     low_f                        - - -  "lower bound of frequency range" -
###typedef  ^                    ^            ^        high_f                       - - -  "upper bound of frequency range" -
###typedef  ^                    ^            ^        lk_facor                     - - -  "turbulence length-scale" -
###typedef  ^                    ^            ^        STD                          - - -  "standard deviation of the turbulence" -
###
#### shinozuka_data
###typedef  FVW/FVW              Shinozuka    Reki     f_syn                        : - -  "frequency series" -
###typedef  ^                    ^            ^        t_syn                        : - -  "time series" -
###typedef  ^                    ^            ^        phi                          : - -  "random phase angle" -
###typedef  ^                    ^            ^        p_k                          : - -  "" -
###typedef  ^                    ^            ^        a_k                          : - -  "" -
###typedef  ^                    ^            IntKi    num_points                   - - -  "total number of points" -
###typedef  ^                    ^            ^        ILo                          - - -  "" -
###typedef  ^                    ^            ^        i                            - - -  "" -
###typedef  ^                    ^            ^        j                            - - -  "" -
###typedef  ^                    ^            Reki     dt                           - - -  "time step" -
###typedef  ^                    ^            ^        t_min                        - - -  "" -
###typedef  ^                    ^            ^        t_max                        - - -  "" -
###typedef  ^                    ^            ^        df                           - - -  "frequency step" -
###
#### smooth_out_wake_data
###typedef  ^        smooth_out_wake_data     IntKi    length_velocity_array        - - -  "the length of velocity_array" -
###
#### smooth_wake_shifted_velocity_data
###typedef  FVW/FVW              SWSV         IntKi    p1                           - - -  "" -
###typedef  ^                    ^            ^        p2                           - - -  "" -
###typedef  ^                    ^            Reki     distance                     - - -  "the distance from the point to the meandered wake center" -
###typedef  ^                    ^            ^        y0                           - - -  "wake center position on y axis" -
###typedef  ^                    ^            ^        z0                           - - -  "wake center position on z axis" -
###typedef  ^                    ^            ^        unit                         - - -  "single unit length  R/ppR" -
###
#### Upwind_result
###typedef  FVW/FVW        read_upwind_result   Reki  upwind_U                 :: - -  "" -
###typedef  ^                    ^              ^     upwind_wakecenter      :::: - -  "" -
###typedef  ^                    ^              ^     upwind_meanU              : - -  "" -
###typedef  ^                    ^              ^     upwind_TI                 : - -  "" -
###typedef  ^                    ^              ^     upwind_small_TI           : - -  "" -
###typedef  ^                    ^              ^     upwind_smoothWake        :: - -  "" -
###typedef  ^                    ^              ^     velocity_aerodyn          : - -  "" -
###typedef  ^                    ^              ^     TI_downstream             : - -  "" -
###typedef  ^                    ^              ^     small_scale_TI_downstream : - -  "" -
###typedef  ^                    ^              ^     smoothed_velocity_array  :: - -  "" -
###typedef  ^                    ^              ^     vel_matrix              ::: - -  "The smoothed out wake velocity matrix for n downwind turbine" -
###
#### wake_meandered_center
###typedef  FVW/FVW        wake_meandered_center   IntKi  wake_width                   : - -  "wake width" -
###
#### FVW_turbine_blade
###typedef  FVW/FVW        FVW_turbine_blade       IntKi  Aerodyn_turbine_num          - - -  "" -
###typedef  ^                    ^                   ^    Blade_index                  - - -  " the index of Aerodyn Blade" -
###typedef  ^                    ^                   ^    Element_index                - - -  " the index of Aerodyn Element" -
###
###


###typedef  FVW/FVW         ParameterType         Reki                        velocityU                     : - -  "the wake velocity profile @ the downstream turbine plane" -
###typedef  ^                    ^                  ^                         smoothed_wake                 : - -  "" -
###typedef  ^                    ^                  ^                         WakePosition                ::: - -  "meandered wake center" -
###typedef  ^                    ^               IntKi                        WakePosition_1                - - -  "size of the WakePosition" -
###typedef  ^                    ^                  ^                         WakePosition_2                - - -  "size of the WakePosition" -
###typedef  ^                    ^                  ^                         smooth_flag                   - - -  "Whether or not use the smoothed out upstream wake profile (1-yes, 0-no)" -
###typedef  ^                    ^                  ^                         p_p_r                         - - -  "" -
###typedef  ^                    ^                  ^                         NumWT                         - - -  "Number of wind turbines" -
###typedef  ^                    ^                  ^                         Tinfluencer                   - - -  "" -
###typedef  ^                    ^                Reki                        RotorR                        - - -  "Rotor radius" -
###typedef  ^                    ^                  ^                         r_domain                      - - -  "" -
###typedef  ^                    ^                  ^                         x_domain                      - - -  "" -
###typedef  ^                    ^                  ^                         Uambient                      - - -  "The ambient wind velocity" -
###typedef  ^                    ^                  ^                         TI_amb                        - - -  "Ambient turbulence intensity" %
###typedef  ^                    ^                  ^                         TI_wake                       - - -  "" -
###typedef  ^                    ^                  ^                         hub_height                    - - -  "" -
###typedef  ^                    ^                  ^                         length_velocityU              - - -  "" -
###typedef  ^                    ^                  ^                         WFLowerBd                     - - -  "The lower bound height of the wind file" -
###typedef  ^                    ^                  ^                         Wind_file_Mean_u              - - -  "The mean velocity of the first turbine" -
###typedef  ^                    ^                  ^                         Winddir                       - - -  "" -
###typedef  ^                    ^                  ^                         air_density                   - - -  "air density" -
###typedef  ^                    ^                  ^                         RR                            - - -  "" -
###typedef  ^                    ^                  ^                         ElementRad                    : - -  " the element node radius" -
###typedef  ^                    ^                IntKi                       Bnum                          - - -  " the number of blade" -
###typedef  ^                    ^                  ^                         ElementNum                    - - -  " the number of element" -
###typedef  ^                    ^               read_turbine_position_data   RTPD

###typedef  FVW/FVW    MiscVarType                Reki                         position_y                   - - -  "the y position of the blade node" -
###typedef  ^                    ^                 ^                           position_z                   - - -  "the z position of the blade node" -
###typedef  ^                    ^                 ^                           velocity_wake_mean           - - -  "" -
###typedef  ^                    ^                 ^                           shifted_velocity_Aerodyn     - - -  "" -
###typedef  ^                    ^                 ^                           U_velocity                   - - -  " the u component velocity of blade" -
###typedef  ^                    ^                 ^                           V_velocity                   - - -  " the v component velocity of blade" -
###typedef  ^                    ^                 ^                           Nforce                      :: - -  " the normal force" -
###typedef  ^                    ^                 ^                           blade_dr                     : - -  " blade dr" -
###typedef  ^                    ^                 ^                           NacYaw                       - - -  "" -
###typedef  ^                    ^                 ^                           TI_original                  - - -  "" -
###typedef  ^                    ^           turbine_average_velocity_data     TAVD
###typedef  ^                    ^                CVSD                         CalVelScale_data
###typedef  ^                    ^                MeanderData                  meandering_data
###typedef  ^                    ^                WeiMethod                    weighting_method
###typedef  ^                    ^                TIDownstream                 TI_downstream_data
###typedef  ^                    ^                TurbKaimal                   Turbulence_KS
###typedef  ^                    ^                Shinozuka                    shinozuka_data
###typedef  ^                    ^           smooth_out_wake_data              SmoothOut
###typedef  ^                    ^                SWSV                         smooth_wake_shifted_velocity_data
###typedef  ^                    ^                FVW_Wake_Deficit_Data        DWDD
###typedef  ^                    ^                Reki                         ct_tilde                     - - - "the tilde Ct" -
###typedef  ^                    ^                  ^                          FAST_Time                     - - -  "FAST simulation time" -
###typedef  ^                    ^                IntKi                        SDtimestep                   - 0 -  "" -
###typedef  ^                    ^                FVW_turbine_blade            FVW_tb
###typedef  ^                    ^                wake_meandered_center        WMC
